require 'test_helper'

class RuleParseTest < ActiveSupport::TestCase

  test "parse: stock list page" do
    # setup
    downloaded_content = {
      url: "https://kabuoji3.com/stock/?page=1",
      method: "GET",
      response_headers: {
        "server": "nginx",
        "date": "Mon, 01 Oct 2018 11:53:48 GMT",
        "content-type": "text/html",
        "x-powered-by": "PHP/5.2.17"
      },
      content: File.open("test/fixtures/files/stock_list_page_1.html").read,
      downloaded_timestamp: Time.zone.local(2018, 10, 1, 20, 53, 48)
    }

    expected_result = {
      data: {
        page: 1,
        stocks: [
          { ticker_symbol: "1301", company_name: "(株)極洋", market: "東証1部" },
          { ticker_symbol: "1305", company_name: "ダイワ 上場投信-トピックス", market: "東証ETF" },
          { ticker_symbol: "1306", company_name: "TOPIX連動型上場投資信託", market: "東証ETF" },
          { ticker_symbol: "1308", company_name: "上場インデックスファンドTOPIX", market: "東証ETF" },
          { ticker_symbol: "1309", company_name: "上海株式指数･上証50連動型上場投資信託", market: "東証ETF" },
          { ticker_symbol: "1310", company_name: "ダイワ 上場投信-トピックス･コア30", market: "東証ETF" },
          { ticker_symbol: "1311", company_name: "TOPIXCore30連動型上場投資信託", market: "東証ETF" },
          { ticker_symbol: "1312", company_name: "小型コア･インデックス連動型上場投資信託", market: "東証ETF" },
          { ticker_symbol: "1313", company_name: "サムスンKODEX200上場指数投資信託", market: "東証ETF" },
          { ticker_symbol: "1319", company_name: "日経300株価指数連動型上場投資信託", market: "東証ETF" },
          { ticker_symbol: "1320", company_name: "ダイワ 上場投信-日経225", market: "東証ETF" },
          { ticker_symbol: "1321", company_name: "日経225連動型上場投資信託", market: "東証ETF" },
          { ticker_symbol: "1322", company_name: "上場インデックスファンド中国A株CSI300", market: "東証ETF" },
          { ticker_symbol: "1324", company_name: "(NEXT FUNDS)ロシア株式指数上場投信", market: "東証ETF" },
          { ticker_symbol: "1325", company_name: "(NEXT FUNDS)ブラジル株式指数上場投信", market: "東証ETF" },
          { ticker_symbol: "1326", company_name: "SPDRゴールド･シェア", market: "東証ETF" },
          { ticker_symbol: "1327", company_name: "S&P GSCI商品指数エネルギー＆メタル", market: "東証ETF" },
          { ticker_symbol: "1328", company_name: "金価格連動型上場投資信託", market: "東証ETF" },
          { ticker_symbol: "1329", company_name: "iシェアーズ日経225ETF", market: "東証ETF" },
          { ticker_symbol: "1330", company_name: "上場インデックスファンド225", market: "東証ETF" },
          { ticker_symbol: "1332", company_name: "日本水産(株)", market: "東証1部" },
          { ticker_symbol: "1333", company_name: "マルハニチロ(株)", market: "東証1部" },
          { ticker_symbol: "1343", company_name: "(NEXT FUNDS)東証REIT指数連動型上場投信", market: "東証ETF" },
          { ticker_symbol: "1344", company_name: "MAXIS トピックス･コア30上場投信", market: "東証ETF" },
          { ticker_symbol: "1345", company_name: "上場インデックスファンドJリート隔月分配", market: "東証ETF" },
          { ticker_symbol: "1346", company_name: "MAXIS 日経225上場投信", market: "東証ETF" },
          { ticker_symbol: "1348", company_name: "MAXIS トピックス上場投信", market: "東証ETF" },
          { ticker_symbol: "1349", company_name: "ABF 汎アジア債券インデックス･ファンド", market: "東証ETF" },
          { ticker_symbol: "1352", company_name: "(株)ホウスイ", market: "東証1部" },
          { ticker_symbol: "1356", company_name: "TOPIXベア2倍上場投信", market: "東証ETF" },
          { ticker_symbol: "1357", company_name: "(NEXT FUNDS) 日経ダブルインバース上場投信", market: "東証ETF" },
          { ticker_symbol: "1358", company_name: "上場インデックス日経レバレッジ指数", market: "東証ETF" },
          { ticker_symbol: "1360", company_name: "日経平均ベア2倍上場投信", market: "東証ETF" },
          { ticker_symbol: "1364", company_name: "ｉシェアーズ JPX日経400 ETF", market: "東証ETF" },
          { ticker_symbol: "1365", company_name: "ダイワ 上場投信-日経平均レバレッジ", market: "東証ETF" },
          { ticker_symbol: "1366", company_name: "ダイワ 上場投信-日経平均ダブルインバース", market: "東証ETF" },
          { ticker_symbol: "1367", company_name: "ダイワ 上場投信-TOPIXレバレッジ(2倍)", market: "東証ETF" },
          { ticker_symbol: "1368", company_name: "ダイワ 上場投信-TOPIX Wインバース(-2倍)", market: "東証ETF" },
          { ticker_symbol: "1369", company_name: "One ETF 日経225", market: "東証ETF" },
          { ticker_symbol: "1376", company_name: "カネコ種苗(株)", market: "東証1部" },
          { ticker_symbol: "1377", company_name: "(株)サカタのタネ", market: "東証1部" },
          { ticker_symbol: "1379", company_name: "ホクト(株)", market: "東証1部" },
          { ticker_symbol: "1380", company_name: "(株)秋川牧園", market: "東証JQS" },
          { ticker_symbol: "1381", company_name: "(株)アクシーズ", market: "東証JQS" },
          { ticker_symbol: "1382", company_name: "(株)ホーブ", market: "東証JQS" },
          { ticker_symbol: "1383", company_name: "ベルグアース(株)", market: "東証JQS" },
          { ticker_symbol: "1384", company_name: "(株)ホクリヨウ", market: "東証1部" },
          { ticker_symbol: "1385", company_name: "UBS ETF ユーロ圏大型株50(E･ストックス50)", market: "東証ETF" },
          { ticker_symbol: "1386", company_name: "UBS ETF 欧州株(MSCIヨーロッパ)", market: "東証ETF" },
          { ticker_symbol: "1387", company_name: "UBS ETF 欧州通貨圏株(MSCI EMU)", market: "東証ETF" },
          { ticker_symbol: "1388", company_name: "UBS ETF 欧州通貨圏小型株(MSCI EMU小型株)", market: "東証ETF" },
          { ticker_symbol: "1389", company_name: "UBS ETF 英国大型株100(FTSE 100)", market: "東証ETF" },
          { ticker_symbol: "1390", company_name: "UBS ETF MSCIアジア太平洋株(除く日本)", market: "東証ETF" },
          { ticker_symbol: "1391", company_name: "UBS ETF スイス株(MSCIスイス20/35)", market: "東証ETF" },
          { ticker_symbol: "1392", company_name: "UBS ETF 英国株(MSCI英国)", market: "東証ETF" },
          { ticker_symbol: "1393", company_name: "UBS ETF 米国株(MSCI米国)", market: "東証ETF" },
          { ticker_symbol: "1394", company_name: "UBS ETF 先進国株(MSCIワールド)", market: "東証ETF" },
          { ticker_symbol: "1397", company_name: "SMAM 日経225上場投信", market: "東証ETF" },
          { ticker_symbol: "1398", company_name: "SMAM 東証REIT指数上場投信", market: "東証ETF" },
          { ticker_symbol: "1399", company_name: "上場MSCI日本株高配当低ボラティリティ", market: "東証ETF" },
          { ticker_symbol: "1400", company_name: "ルーデン・ホールディングス(株)", market: "東証JQG" },
          { ticker_symbol: "1401", company_name: "(株)エムビーエス", market: "マザーズ" },
          { ticker_symbol: "1407", company_name: "(株)ウエストホールディングス", market: "東証JQS" },
          { ticker_symbol: "1414", company_name: "ショーボンドホールディングス(株)", market: "東証1部" },
          { ticker_symbol: "1417", company_name: "(株)ミライト・ホールディングス", market: "東証1部" },
          { ticker_symbol: "1418", company_name: "インターライフホールディングス(株)", market: "東証JQS" },
          { ticker_symbol: "1419", company_name: "タマホーム(株)", market: "東証1部" },
          { ticker_symbol: "1420", company_name: "サンヨーホームズ(株)", market: "東証1部" },
          { ticker_symbol: "1429", company_name: "(株)日本アクア", market: "東証1部" },
          { ticker_symbol: "1430", company_name: "ファーストコーポレーション(株)", market: "東証1部" },
          { ticker_symbol: "1431", company_name: "(株)Ｌｉｂ　Ｗｏｒｋ", market: "福岡Q" },
          { ticker_symbol: "1433", company_name: "ベステラ(株)", market: "東証1部" },
          { ticker_symbol: "1434", company_name: "ＪＥＳＣＯホールディングス(株)", market: "東証2部" },
          { ticker_symbol: "1435", company_name: "(株)ＴＡＴＥＲＵ", market: "東証1部" },
          { ticker_symbol: "1436", company_name: "(株)フィット", market: "マザーズ" },
          { ticker_symbol: "1438", company_name: "(株)岐阜造園", market: "名証2部" },
          { ticker_symbol: "1439", company_name: "(株)安江工務店", market: "東証JQS" },
          { ticker_symbol: "1443", company_name: "技研ホールディングス(株)", market: "東証2部" },
          { ticker_symbol: "1446", company_name: "(株)キャンディル", market: "マザーズ" },
          { ticker_symbol: "1447", company_name: "ＩＴｂｏｏｋホールディングス(株)", market: "マザーズ" },
          { ticker_symbol: "1448", company_name: "(株)スペースバリューホールディングス", market: "東証1部" },
          { ticker_symbol: "1456", company_name: "ダイワ 上場投信-日経平均インバース", market: "東証ETF" },
          { ticker_symbol: "1457", company_name: "ダイワ 上場投信-TOPIXインバース（-1倍）", market: "東証ETF" },
          { ticker_symbol: "1458", company_name: "楽天 ETF-日経レバレッジ指数連動型", market: "東証ETF" },
          { ticker_symbol: "1459", company_name: "楽天 ETF-日経ダブルインバース指数連動型", market: "東証ETF" },
          { ticker_symbol: "1460", company_name: "MAXIS JAPAN クオリティ150上場投信", market: "東証ETF" },
          { ticker_symbol: "1464", company_name: "ダイワ上場投信-JPX日経400レバレッジ", market: "東証ETF" },
          { ticker_symbol: "1465", company_name: "ダイワ上場投信-JPX日経400インバース", market: "東証ETF" },
          { ticker_symbol: "1466", company_name: "ダイワ上場投信-JPX日経400ダブルインバース", market: "東証ETF" },
          { ticker_symbol: "1467", company_name: "JPX日経400ブル2倍上場投信レバレッジ", market: "東証ETF" },
          { ticker_symbol: "1469", company_name: "JPX日経400ベア2倍上場投信ダブルインバース", market: "東証ETF" },
          { ticker_symbol: "1470", company_name: "(NEXT FUNDS)JPX日経400レバレッジ", market: "東証ETF" },
          { ticker_symbol: "1472", company_name: "(NEXT FUNDS)JPX日経400ダブルインバース", market: "東証ETF" },
          { ticker_symbol: "1473", company_name: "One ETF トピックス", market: "東証ETF" },
          { ticker_symbol: "1474", company_name: "One ETF JPX日経400", market: "東証ETF" },
          { ticker_symbol: "1475", company_name: "iシェアーズ TOPIX ETF", market: "東証ETF" },
          { ticker_symbol: "1476", company_name: "iシェアーズ Ｊリート ETF", market: "東証ETF" },
          { ticker_symbol: "1477", company_name: "iシェアーズ MSCI 日本株最小分散 ETF", market: "東証ETF" },
          { ticker_symbol: "1478", company_name: "iシェアーズ MSCI ジャパン高配当利回り ETF", market: "東証ETF" },
          { ticker_symbol: "1479", company_name: "ダイワ 上場投信-MSCI日本株人材設備投資指数", market: "東証ETF" },
          { ticker_symbol: "1481", company_name: "上場インデックスファンド日本経済貢献株", market: "東証ETF" },
          { ticker_symbol: "1482", company_name: "iシェアーズ 米国債7-10年ETF(H有)", market: "東証ETF" },
          { ticker_symbol: "1483", company_name: "iシェアーズ JPX/S&P 設備･人材投資ETF", market: "東証ETF" },
          { ticker_symbol: "1484", company_name: "One ETF JPX/S&P 設備･人材投資指数", market: "東証ETF" },
          { ticker_symbol: "1486", company_name: "上場インデックスファンド米国債券(H無)", market: "東証ETF" },
          { ticker_symbol: "1487", company_name: "上場インデックスファンド米国債券(H有)", market: "東証ETF" },
          { ticker_symbol: "1488", company_name: "ダイワ上場投信-東証REIT指数", market: "東証ETF" },
          { ticker_symbol: "1489", company_name: "(NEXT FUNDS)日経平均高配当株50指数連動型ETF", market: "東証ETF" },
          { ticker_symbol: "1491", company_name: "中外鉱業(株)", market: "東証2部" },
          { ticker_symbol: "1492", company_name: "MAXIS JPX日経中小型株指数上場投信", market: "東証ETF" },
          { ticker_symbol: "1493", company_name: "One ETF JPX日経中小型", market: "東証ETF" },
          { ticker_symbol: "1494", company_name: "One ETF 高配当日本株", market: "東証ETF" },
          { ticker_symbol: "1495", company_name: "上場インデックスファンドアジアリート", market: "東証ETF" },
          { ticker_symbol: "1496", company_name: "iシェアーズ 米ドル建て投資適格社債ETF(H有)", market: "東証ETF" },
          { ticker_symbol: "1497", company_name: "iシェアーズ 米ドル建ハイイールド社債ETF(H有)", market: "東証ETF" },
          { ticker_symbol: "1498", company_name: "One ETF ESG", market: "東証ETF" },
          { ticker_symbol: "1499", company_name: "MAXIS 日本株高配当70マーケットニュートラル", market: "東証ETF" },
          { ticker_symbol: "1514", company_name: "住石ホールディングス(株)", market: "東証1部" },
          { ticker_symbol: "1515", company_name: "日鉄鉱業(株)", market: "東証1部" },
          { ticker_symbol: "1518", company_name: "三井松島ホールディングス(株)", market: "東証1部" }
        ]
      },
      related_requests: [
        { url: "https://kabuoji3.com/stock/1301/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1305/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1306/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1308/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1309/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1310/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1311/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1312/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1313/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1319/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1320/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1321/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1322/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1324/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1325/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1326/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1327/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1328/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1329/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1330/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1332/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1333/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1343/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1344/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1345/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1346/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1348/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1349/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1352/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1356/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1357/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1358/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1360/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1364/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1365/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1366/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1367/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1368/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1369/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1376/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1377/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1379/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1380/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1381/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1382/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1383/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1384/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1385/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1386/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1387/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1388/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1389/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1390/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1391/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1392/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1393/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1394/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1397/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1398/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1399/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1400/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1401/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1407/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1414/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1417/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1418/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1419/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1420/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1429/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1430/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1431/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1433/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1434/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1435/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1436/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1438/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1439/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1443/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1446/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1447/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1448/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1456/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1457/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1458/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1459/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1460/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1464/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1465/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1466/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1467/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1469/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1470/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1472/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1473/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1474/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1475/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1476/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1477/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1478/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1479/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1481/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1482/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1483/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1484/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1486/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1487/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1488/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1489/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1491/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1492/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1493/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1494/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1495/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1496/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1497/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1498/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1499/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1514/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1515/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1518/", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=1", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=2", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=3", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=4", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=5", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=6", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=7", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=8", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=9", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=10", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=11", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=12", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=13", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=14", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=15", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=16", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=17", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=18", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=19", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=20", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=21", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=22", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=23", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=24", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=25", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=26", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=27", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=28", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=29", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=30", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=31", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=32", method: "GET" },
        { url: "https://kabuoji3.com/stock/?page=33", method: "GET" }
      ]
    }

    # execute
    stock_list_page_rule = StockListPageTestRule.new
    result = stock_list_page_rule.parse(downloaded_content)

    # check
    assert_equal expected_result, result
  end

  test "parse: stock detail page: 「(株)極洋」の直近300日" do
    downloaded_content = {
      url: "https://kabuoji3.com/stock/1301/",
      method: "GET",
      response_headers: {
        "server": "nginx",
        "date": "Wed, 03 Oct 2018 04:08:05 GMT",
        "content-type": "text/html",
        "x-powered-by": "PHP/5.2.17"
      },
      content: File.open("test/fixtures/files/stock_detail_1301.html").read,
      downloaded_timestamp: Time.zone.local(2018, 10, 3, 11, 8, 5)
    }

    expected_result = {
      data: {
        ticker_symbol: "1301",
        company_name: "(株)極洋",
        year: nil,
        all_years: [2018, 2017, 2016, 2015, 2014, 2013, 2012, 2011, 2010, 2009, 2008, 2007, 2006, 2005, 2004, 2003, 2002, 2001, 2000, 1999, 1998, 1997, 1996, 1995, 1994, 1993, 1992, 1991, 1990, 1989, 1988, 1987, 1986, 1985, 1984, 1983],
        stock_prices: [
          { date: Time.zone.local(2018, 06, 04), opening_price: 3765, high_price: 3810, low_price: 3765, close_price: 3805, turnover: 13500, adjustment_value: 3805 },
          { date: Time.zone.local(2018, 06, 01), opening_price: 3795, high_price: 3795, low_price: 3745, close_price: 3755, turnover: 16300, adjustment_value: 3755 },
          { date: Time.zone.local(2018, 05, 31), opening_price: 3835, high_price: 3845, low_price: 3775, close_price: 3780, turnover: 38000, adjustment_value: 3780 },
          { date: Time.zone.local(2018, 05, 30), opening_price: 3730, high_price: 3850, low_price: 3710, close_price: 3835, turnover: 49600, adjustment_value: 3835 },
          { date: Time.zone.local(2018, 05, 29), opening_price: 3735, high_price: 3780, low_price: 3725, close_price: 3775, turnover: 17000, adjustment_value: 3775 },
          { date: Time.zone.local(2018, 05, 28), opening_price: 3745, high_price: 3745, low_price: 3710, close_price: 3735, turnover: 17900, adjustment_value: 3735 },
          { date: Time.zone.local(2018, 05, 25), opening_price: 3735, high_price: 3755, low_price: 3715, close_price: 3715, turnover: 22100, adjustment_value: 3715 },
          { date: Time.zone.local(2018, 05, 24), opening_price: 3730, high_price: 3765, low_price: 3715, close_price: 3735, turnover: 18300, adjustment_value: 3735 },
          { date: Time.zone.local(2018, 05, 23), opening_price: 3745, high_price: 3760, low_price: 3725, close_price: 3745, turnover: 19900, adjustment_value: 3745 },
          { date: Time.zone.local(2018, 05, 22), opening_price: 3785, high_price: 3785, low_price: 3735, close_price: 3745, turnover: 16800, adjustment_value: 3745 },
          { date: Time.zone.local(2018, 05, 21), opening_price: 3825, high_price: 3830, low_price: 3785, close_price: 3795, turnover: 14800, adjustment_value: 3795 },
          { date: Time.zone.local(2018, 05, 18), opening_price: 3850, high_price: 3850, low_price: 3805, close_price: 3825, turnover: 26600, adjustment_value: 3825 },
          { date: Time.zone.local(2018, 05, 17), opening_price: 3810, high_price: 3830, low_price: 3790, close_price: 3830, turnover: 14900, adjustment_value: 3830 },
          { date: Time.zone.local(2018, 05, 16), opening_price: 3825, high_price: 3845, low_price: 3800, close_price: 3815, turnover: 22300, adjustment_value: 3815 },
          { date: Time.zone.local(2018, 05, 14), opening_price: 3800, high_price: 3845, low_price: 3795, close_price: 3810, turnover: 34000, adjustment_value: 3810 },
          { date: Time.zone.local(2018, 05, 11), opening_price: 3775, high_price: 3810, low_price: 3770, close_price: 3805, turnover: 44100, adjustment_value: 3805 },
          { date: Time.zone.local(2018, 05, 10), opening_price: 3840, high_price: 3870, low_price: 3760, close_price: 3815, turnover: 44400, adjustment_value: 3815 },
          { date: Time.zone.local(2018, 05, 09), opening_price: 3790, high_price: 3840, low_price: 3790, close_price: 3825, turnover: 24500, adjustment_value: 3825 },
          { date: Time.zone.local(2018, 05, 08), opening_price: 3765, high_price: 3845, low_price: 3760, close_price: 3825, turnover: 32000, adjustment_value: 3825 },
          { date: Time.zone.local(2018, 05, 07), opening_price: 3810, high_price: 3810, low_price: 3775, close_price: 3785, turnover: 22900, adjustment_value: 3785 },
          { date: Time.zone.local(2018, 05, 02), opening_price: 3785, high_price: 3800, low_price: 3765, close_price: 3800, turnover: 12100, adjustment_value: 3800 },
          { date: Time.zone.local(2018, 05, 01), opening_price: 3770, high_price: 3785, low_price: 3755, close_price: 3785, turnover: 14300, adjustment_value: 3785 },
          { date: Time.zone.local(2018, 04, 27), opening_price: 3725, high_price: 3775, low_price: 3715, close_price: 3775, turnover: 29400, adjustment_value: 3775 },
          { date: Time.zone.local(2018, 04, 26), opening_price: 3725, high_price: 3730, low_price: 3705, close_price: 3725, turnover: 19600, adjustment_value: 3725 },
          { date: Time.zone.local(2018, 04, 25), opening_price: 3705, high_price: 3740, low_price: 3705, close_price: 3725, turnover: 11900, adjustment_value: 3725 },
          { date: Time.zone.local(2018, 04, 24), opening_price: 3710, high_price: 3740, low_price: 3705, close_price: 3725, turnover: 21500, adjustment_value: 3725 },
          { date: Time.zone.local(2018, 04, 23), opening_price: 3730, high_price: 3730, low_price: 3690, close_price: 3705, turnover: 23100, adjustment_value: 3705 },
          { date: Time.zone.local(2018, 04, 20), opening_price: 3775, high_price: 3775, low_price: 3745, close_price: 3755, turnover: 12200, adjustment_value: 3755 },
          { date: Time.zone.local(2018, 04, 19), opening_price: 3750, high_price: 3760, low_price: 3735, close_price: 3755, turnover: 14300, adjustment_value: 3755 },
          { date: Time.zone.local(2018, 04, 18), opening_price: 3760, high_price: 3775, low_price: 3735, close_price: 3750, turnover: 15000, adjustment_value: 3750 },
          { date: Time.zone.local(2018, 04, 17), opening_price: 3800, high_price: 3815, low_price: 3755, close_price: 3755, turnover: 12200, adjustment_value: 3755 },
          { date: Time.zone.local(2018, 04, 16), opening_price: 3755, high_price: 3805, low_price: 3740, close_price: 3800, turnover: 14700, adjustment_value: 3800 },
          { date: Time.zone.local(2018, 04, 13), opening_price: 3770, high_price: 3785, low_price: 3740, close_price: 3760, turnover: 12800, adjustment_value: 3760 },
          { date: Time.zone.local(2018, 04, 12), opening_price: 3750, high_price: 3770, low_price: 3740, close_price: 3760, turnover: 14500, adjustment_value: 3760 },
          { date: Time.zone.local(2018, 04, 11), opening_price: 3810, high_price: 3815, low_price: 3745, close_price: 3755, turnover: 27100, adjustment_value: 3755 },
          { date: Time.zone.local(2018, 04, 10), opening_price: 3830, high_price: 3870, low_price: 3805, close_price: 3830, turnover: 27200, adjustment_value: 3830 },
          { date: Time.zone.local(2018, 04, 09), opening_price: 3765, high_price: 3850, low_price: 3760, close_price: 3830, turnover: 28600, adjustment_value: 3830 },
          { date: Time.zone.local(2018, 04, 06), opening_price: 3840, high_price: 3840, low_price: 3790, close_price: 3790, turnover: 18400, adjustment_value: 3790 },
          { date: Time.zone.local(2018, 04, 05), opening_price: 3805, high_price: 3830, low_price: 3795, close_price: 3810, turnover: 20600, adjustment_value: 3810 },
          { date: Time.zone.local(2018, 04, 04), opening_price: 3735, high_price: 3805, low_price: 3720, close_price: 3805, turnover: 25900, adjustment_value: 3805 },
          { date: Time.zone.local(2018, 04, 03), opening_price: 3690, high_price: 3755, low_price: 3680, close_price: 3735, turnover: 24500, adjustment_value: 3735 },
          { date: Time.zone.local(2018, 04, 02), opening_price: 3800, high_price: 3800, low_price: 3740, close_price: 3750, turnover: 28000, adjustment_value: 3750 },
          { date: Time.zone.local(2018, 03, 30), opening_price: 3840, high_price: 3840, low_price: 3785, close_price: 3800, turnover: 23500, adjustment_value: 3800 },
          { date: Time.zone.local(2018, 03, 29), opening_price: 3820, high_price: 3830, low_price: 3785, close_price: 3820, turnover: 26500, adjustment_value: 3820 },
          { date: Time.zone.local(2018, 03, 28), opening_price: 3800, high_price: 3815, low_price: 3765, close_price: 3800, turnover: 64000, adjustment_value: 3800 },
          { date: Time.zone.local(2018, 03, 27), opening_price: 3890, high_price: 3930, low_price: 3880, close_price: 3930, turnover: 106900, adjustment_value: 3930 },
          { date: Time.zone.local(2018, 03, 26), opening_price: 3785, high_price: 3860, low_price: 3780, close_price: 3860, turnover: 43900, adjustment_value: 3860 },
          { date: Time.zone.local(2018, 03, 23), opening_price: 3830, high_price: 3840, low_price: 3800, close_price: 3815, turnover: 37800, adjustment_value: 3815 },
          { date: Time.zone.local(2018, 03, 22), opening_price: 3855, high_price: 3885, low_price: 3850, close_price: 3880, turnover: 28800, adjustment_value: 3880 },
          { date: Time.zone.local(2018, 03, 20), opening_price: 3830, high_price: 3865, low_price: 3785, close_price: 3865, turnover: 29200, adjustment_value: 3865 },
          { date: Time.zone.local(2018, 03, 19), opening_price: 3890, high_price: 3895, low_price: 3830, close_price: 3845, turnover: 35500, adjustment_value: 3845 },
          { date: Time.zone.local(2018, 03, 16), opening_price: 3890, high_price: 3895, low_price: 3860, close_price: 3895, turnover: 43200, adjustment_value: 3895 },
          { date: Time.zone.local(2018, 03, 15), opening_price: 3890, high_price: 3895, low_price: 3840, close_price: 3885, turnover: 25200, adjustment_value: 3885 },
          { date: Time.zone.local(2018, 03, 14), opening_price: 3905, high_price: 3920, low_price: 3890, close_price: 3900, turnover: 20500, adjustment_value: 3900 },
          { date: Time.zone.local(2018, 03, 13), opening_price: 3895, high_price: 3925, low_price: 3885, close_price: 3925, turnover: 25000, adjustment_value: 3925 },
          { date: Time.zone.local(2018, 03, 12), opening_price: 3920, high_price: 3920, low_price: 3870, close_price: 3905, turnover: 31200, adjustment_value: 3905 },
          { date: Time.zone.local(2018, 03, 09), opening_price: 3895, high_price: 3920, low_price: 3845, close_price: 3875, turnover: 41500, adjustment_value: 3875 },
          { date: Time.zone.local(2018, 03, 08), opening_price: 3865, high_price: 3875, low_price: 3830, close_price: 3865, turnover: 29100, adjustment_value: 3865 },
          { date: Time.zone.local(2018, 03, 07), opening_price: 3815, high_price: 3860, low_price: 3795, close_price: 3820, turnover: 22900, adjustment_value: 3820 },
          { date: Time.zone.local(2018, 03, 06), opening_price: 3780, high_price: 3825, low_price: 3780, close_price: 3815, turnover: 24300, adjustment_value: 3815 },
          { date: Time.zone.local(2018, 03, 05), opening_price: 3770, high_price: 3815, low_price: 3740, close_price: 3760, turnover: 30900, adjustment_value: 3760 },
          { date: Time.zone.local(2018, 03, 02), opening_price: 3745, high_price: 3755, low_price: 3700, close_price: 3740, turnover: 31100, adjustment_value: 3740 },
          { date: Time.zone.local(2018, 03, 01), opening_price: 3825, high_price: 3825, low_price: 3765, close_price: 3770, turnover: 39400, adjustment_value: 3770 },
          { date: Time.zone.local(2018, 02, 28), opening_price: 3845, high_price: 3885, low_price: 3835, close_price: 3835, turnover: 51700, adjustment_value: 3835 },
          { date: Time.zone.local(2018, 02, 27), opening_price: 3915, high_price: 3920, low_price: 3850, close_price: 3855, turnover: 44200, adjustment_value: 3855 },
          { date: Time.zone.local(2018, 02, 26), opening_price: 3950, high_price: 3955, low_price: 3905, close_price: 3915, turnover: 30800, adjustment_value: 3915 },
          { date: Time.zone.local(2018, 02, 23), opening_price: 3875, high_price: 3930, low_price: 3875, close_price: 3930, turnover: 22600, adjustment_value: 3930 },
          { date: Time.zone.local(2018, 02, 22), opening_price: 3925, high_price: 3925, low_price: 3825, close_price: 3870, turnover: 28800, adjustment_value: 3870 },
          { date: Time.zone.local(2018, 02, 21), opening_price: 3920, high_price: 3945, low_price: 3875, close_price: 3915, turnover: 27000, adjustment_value: 3915 },
          { date: Time.zone.local(2018, 02, 20), opening_price: 3920, high_price: 3920, low_price: 3870, close_price: 3895, turnover: 27600, adjustment_value: 3895 },
          { date: Time.zone.local(2018, 02, 19), opening_price: 3850, high_price: 3890, low_price: 3845, close_price: 3880, turnover: 24000, adjustment_value: 3880 },
          { date: Time.zone.local(2018, 02, 16), opening_price: 3740, high_price: 3835, low_price: 3740, close_price: 3820, turnover: 47100, adjustment_value: 3820 },
          { date: Time.zone.local(2018, 02, 15), opening_price: 3705, high_price: 3730, low_price: 3675, close_price: 3715, turnover: 48600, adjustment_value: 3715 },
          { date: Time.zone.local(2018, 02, 14), opening_price: 3700, high_price: 3735, low_price: 3645, close_price: 3700, turnover: 49200, adjustment_value: 3700 },
          { date: Time.zone.local(2018, 02, 13), opening_price: 3850, high_price: 3860, low_price: 3680, close_price: 3695, turnover: 81400, adjustment_value: 3695 },
          { date: Time.zone.local(2018, 02, 09), opening_price: 3800, high_price: 3865, low_price: 3770, close_price: 3810, turnover: 72200, adjustment_value: 3810 },
          { date: Time.zone.local(2018, 02, 08), opening_price: 3880, high_price: 3925, low_price: 3870, close_price: 3885, turnover: 31800, adjustment_value: 3885 },
          { date: Time.zone.local(2018, 02, 07), opening_price: 3995, high_price: 4050, low_price: 3875, close_price: 3880, turnover: 47600, adjustment_value: 3880 },
          { date: Time.zone.local(2018, 02, 06), opening_price: 3910, high_price: 3910, low_price: 3830, close_price: 3900, turnover: 89200, adjustment_value: 3900 },
          { date: Time.zone.local(2018, 02, 05), opening_price: 4100, high_price: 4125, low_price: 4055, close_price: 4085, turnover: 49200, adjustment_value: 4085 },
          { date: Time.zone.local(2018, 02, 02), opening_price: 4150, high_price: 4180, low_price: 4140, close_price: 4175, turnover: 20700, adjustment_value: 4175 },
          { date: Time.zone.local(2018, 02, 01), opening_price: 4150, high_price: 4195, low_price: 4130, close_price: 4170, turnover: 21400, adjustment_value: 4170 },
          { date: Time.zone.local(2018, 01, 31), opening_price: 4160, high_price: 4210, low_price: 4140, close_price: 4140, turnover: 41700, adjustment_value: 4140 },
          { date: Time.zone.local(2018, 01, 30), opening_price: 4250, high_price: 4250, low_price: 4170, close_price: 4190, turnover: 38400, adjustment_value: 4190 },
          { date: Time.zone.local(2018, 01, 29), opening_price: 4290, high_price: 4345, low_price: 4270, close_price: 4270, turnover: 32600, adjustment_value: 4270 },
          { date: Time.zone.local(2018, 01, 26), opening_price: 4280, high_price: 4305, low_price: 4275, close_price: 4290, turnover: 26400, adjustment_value: 4290 },
          { date: Time.zone.local(2018, 01, 25), opening_price: 4260, high_price: 4300, low_price: 4210, close_price: 4280, turnover: 40900, adjustment_value: 4280 },
          { date: Time.zone.local(2018, 01, 24), opening_price: 4265, high_price: 4290, low_price: 4250, close_price: 4260, turnover: 32400, adjustment_value: 4260 },
          { date: Time.zone.local(2018, 01, 23), opening_price: 4300, high_price: 4305, low_price: 4255, close_price: 4260, turnover: 54000, adjustment_value: 4260 },
          { date: Time.zone.local(2018, 01, 22), opening_price: 4230, high_price: 4240, low_price: 4160, close_price: 4190, turnover: 41000, adjustment_value: 4190 },
          { date: Time.zone.local(2018, 01, 19), opening_price: 4165, high_price: 4250, low_price: 4160, close_price: 4230, turnover: 55000, adjustment_value: 4230 },
          { date: Time.zone.local(2018, 01, 18), opening_price: 4275, high_price: 4280, low_price: 4160, close_price: 4170, turnover: 47300, adjustment_value: 4170 },
          { date: Time.zone.local(2018, 01, 17), opening_price: 4300, high_price: 4315, low_price: 4250, close_price: 4255, turnover: 31200, adjustment_value: 4255 },
          { date: Time.zone.local(2018, 01, 16), opening_price: 4250, high_price: 4325, low_price: 4230, close_price: 4305, turnover: 37300, adjustment_value: 4305 },
          { date: Time.zone.local(2018, 01, 15), opening_price: 4280, high_price: 4285, low_price: 4255, close_price: 4260, turnover: 31100, adjustment_value: 4260 },
          { date: Time.zone.local(2018, 01, 12), opening_price: 4345, high_price: 4345, low_price: 4265, close_price: 4270, turnover: 42500, adjustment_value: 4270 },
          { date: Time.zone.local(2018, 01, 11), opening_price: 4430, high_price: 4430, low_price: 4340, close_price: 4350, turnover: 48200, adjustment_value: 4350 },
          { date: Time.zone.local(2018, 01, 10), opening_price: 4340, high_price: 4460, low_price: 4340, close_price: 4430, turnover: 91300, adjustment_value: 4430 },
          { date: Time.zone.local(2018, 01, 09), opening_price: 4340, high_price: 4360, low_price: 4325, close_price: 4340, turnover: 26100, adjustment_value: 4340 },
          { date: Time.zone.local(2018, 01, 05), opening_price: 4330, high_price: 4360, low_price: 4285, close_price: 4340, turnover: 55300, adjustment_value: 4340 },
          { date: Time.zone.local(2018, 01, 04), opening_price: 4270, high_price: 4335, low_price: 4220, close_price: 4320, turnover: 61500, adjustment_value: 4320 },
          { date: Time.zone.local(2017, 12, 29), opening_price: 4310, high_price: 4315, low_price: 4280, close_price: 4295, turnover: 16400, adjustment_value: 4295 },
          { date: Time.zone.local(2017, 12, 28), opening_price: 4270, high_price: 4325, low_price: 4230, close_price: 4310, turnover: 58100, adjustment_value: 4310 },
          { date: Time.zone.local(2017, 12, 27), opening_price: 4385, high_price: 4400, low_price: 4250, close_price: 4270, turnover: 58200, adjustment_value: 4270 },
          { date: Time.zone.local(2017, 12, 26), opening_price: 4300, high_price: 4415, low_price: 4300, close_price: 4345, turnover: 75200, adjustment_value: 4345 },
          { date: Time.zone.local(2017, 12, 25), opening_price: 4220, high_price: 4295, low_price: 4215, close_price: 4275, turnover: 53400, adjustment_value: 4275 },
          { date: Time.zone.local(2017, 12, 22), opening_price: 4190, high_price: 4220, low_price: 4165, close_price: 4175, turnover: 30000, adjustment_value: 4175 },
          { date: Time.zone.local(2017, 12, 21), opening_price: 4100, high_price: 4185, low_price: 4090, close_price: 4175, turnover: 44200, adjustment_value: 4175 },
          { date: Time.zone.local(2017, 12, 20), opening_price: 4040, high_price: 4165, low_price: 4010, close_price: 4130, turnover: 59400, adjustment_value: 4130 },
          { date: Time.zone.local(2017, 12, 19), opening_price: 4040, high_price: 4070, low_price: 3995, close_price: 4065, turnover: 36100, adjustment_value: 4065 },
          { date: Time.zone.local(2017, 12, 18), opening_price: 3990, high_price: 4035, low_price: 3975, close_price: 4025, turnover: 24700, adjustment_value: 4025 },
          { date: Time.zone.local(2017, 12, 15), opening_price: 3985, high_price: 3985, low_price: 3960, close_price: 3970, turnover: 23300, adjustment_value: 3970 },
          { date: Time.zone.local(2017, 12, 14), opening_price: 3960, high_price: 3990, low_price: 3950, close_price: 3985, turnover: 33400, adjustment_value: 3985 },
          { date: Time.zone.local(2017, 12, 13), opening_price: 4020, high_price: 4020, low_price: 3945, close_price: 3970, turnover: 37300, adjustment_value: 3970 },
          { date: Time.zone.local(2017, 12, 12), opening_price: 3975, high_price: 4025, low_price: 3950, close_price: 4010, turnover: 46900, adjustment_value: 4010 },
          { date: Time.zone.local(2017, 12, 11), opening_price: 4020, high_price: 4050, low_price: 3945, close_price: 3975, turnover: 28300, adjustment_value: 3975 },
          { date: Time.zone.local(2017, 12, 08), opening_price: 3885, high_price: 4020, low_price: 3885, close_price: 3995, turnover: 79900, adjustment_value: 3995 },
          { date: Time.zone.local(2017, 12, 07), opening_price: 3880, high_price: 3970, low_price: 3880, close_price: 3940, turnover: 54600, adjustment_value: 3940 },
          { date: Time.zone.local(2017, 12, 06), opening_price: 3865, high_price: 3945, low_price: 3860, close_price: 3920, turnover: 72700, adjustment_value: 3920 },
          { date: Time.zone.local(2017, 12, 05), opening_price: 3885, high_price: 3885, low_price: 3835, close_price: 3860, turnover: 23400, adjustment_value: 3860 },
          { date: Time.zone.local(2017, 12, 04), opening_price: 3825, high_price: 3935, low_price: 3815, close_price: 3885, turnover: 63800, adjustment_value: 3885 },
          { date: Time.zone.local(2017, 12, 01), opening_price: 3870, high_price: 3885, low_price: 3815, close_price: 3815, turnover: 42100, adjustment_value: 3815 },
          { date: Time.zone.local(2017, 11, 30), opening_price: 3770, high_price: 3880, low_price: 3765, close_price: 3850, turnover: 50400, adjustment_value: 3850 },
          { date: Time.zone.local(2017, 11, 29), opening_price: 3695, high_price: 3820, low_price: 3690, close_price: 3790, turnover: 68900, adjustment_value: 3790 },
          { date: Time.zone.local(2017, 11, 28), opening_price: 3635, high_price: 3695, low_price: 3610, close_price: 3690, turnover: 33100, adjustment_value: 3690 },
          { date: Time.zone.local(2017, 11, 27), opening_price: 3685, high_price: 3690, low_price: 3630, close_price: 3635, turnover: 24900, adjustment_value: 3635 },
          { date: Time.zone.local(2017, 11, 24), opening_price: 3650, high_price: 3685, low_price: 3635, close_price: 3685, turnover: 19500, adjustment_value: 3685 },
          { date: Time.zone.local(2017, 11, 22), opening_price: 3695, high_price: 3695, low_price: 3645, close_price: 3645, turnover: 23900, adjustment_value: 3645 },
          { date: Time.zone.local(2017, 11, 21), opening_price: 3740, high_price: 3740, low_price: 3690, close_price: 3690, turnover: 25100, adjustment_value: 3690 },
          { date: Time.zone.local(2017, 11, 20), opening_price: 3695, high_price: 3735, low_price: 3680, close_price: 3735, turnover: 38100, adjustment_value: 3735 },
          { date: Time.zone.local(2017, 11, 17), opening_price: 3650, high_price: 3685, low_price: 3635, close_price: 3670, turnover: 40200, adjustment_value: 3670 },
          { date: Time.zone.local(2017, 11, 16), opening_price: 3550, high_price: 3705, low_price: 3550, close_price: 3675, turnover: 70100, adjustment_value: 3675 },
          { date: Time.zone.local(2017, 11, 15), opening_price: 3535, high_price: 3570, low_price: 3515, close_price: 3545, turnover: 47700, adjustment_value: 3545 },
          { date: Time.zone.local(2017, 11, 14), opening_price: 3595, high_price: 3600, low_price: 3540, close_price: 3540, turnover: 48800, adjustment_value: 3540 },
          { date: Time.zone.local(2017, 11, 13), opening_price: 3600, high_price: 3610, low_price: 3590, close_price: 3605, turnover: 22200, adjustment_value: 3605 },
          { date: Time.zone.local(2017, 11, 10), opening_price: 3600, high_price: 3630, low_price: 3590, close_price: 3620, turnover: 35800, adjustment_value: 3620 },
          { date: Time.zone.local(2017, 11, 09), opening_price: 3635, high_price: 3680, low_price: 3610, close_price: 3640, turnover: 88900, adjustment_value: 3640 },
          { date: Time.zone.local(2017, 11, 08), opening_price: 3705, high_price: 3705, low_price: 3610, close_price: 3625, turnover: 96000, adjustment_value: 3625 },
          { date: Time.zone.local(2017, 11, 07), opening_price: 3810, high_price: 3810, low_price: 3690, close_price: 3710, turnover: 93900, adjustment_value: 3710 },
          { date: Time.zone.local(2017, 11, 06), opening_price: 3655, high_price: 3900, low_price: 3655, close_price: 3850, turnover: 142800, adjustment_value: 3850 },
          { date: Time.zone.local(2017, 11, 02), opening_price: 3675, high_price: 3700, low_price: 3620, close_price: 3700, turnover: 70200, adjustment_value: 3700 },
          { date: Time.zone.local(2017, 11, 01), opening_price: 3670, high_price: 3705, low_price: 3620, close_price: 3695, turnover: 86800, adjustment_value: 3695 },
          { date: Time.zone.local(2017, 10, 31), opening_price: 3675, high_price: 3685, low_price: 3645, close_price: 3665, turnover: 33800, adjustment_value: 3665 },
          { date: Time.zone.local(2017, 10, 30), opening_price: 3620, high_price: 3675, low_price: 3585, close_price: 3675, turnover: 78100, adjustment_value: 3675 },
          { date: Time.zone.local(2017, 10, 27), opening_price: 3560, high_price: 3605, low_price: 3560, close_price: 3600, turnover: 39800, adjustment_value: 3600 },
          { date: Time.zone.local(2017, 10, 26), opening_price: 3565, high_price: 3620, low_price: 3540, close_price: 3560, turnover: 45700, adjustment_value: 3560 },
          { date: Time.zone.local(2017, 10, 25), opening_price: 3610, high_price: 3635, low_price: 3590, close_price: 3600, turnover: 38400, adjustment_value: 3600 },
          { date: Time.zone.local(2017, 10, 24), opening_price: 3620, high_price: 3650, low_price: 3605, close_price: 3630, turnover: 32700, adjustment_value: 3630 },
          { date: Time.zone.local(2017, 10, 23), opening_price: 3680, high_price: 3710, low_price: 3620, close_price: 3635, turnover: 51700, adjustment_value: 3635 },
          { date: Time.zone.local(2017, 10, 20), opening_price: 3615, high_price: 3675, low_price: 3600, close_price: 3675, turnover: 51600, adjustment_value: 3675 },
          { date: Time.zone.local(2017, 10, 19), opening_price: 3645, high_price: 3675, low_price: 3605, close_price: 3660, turnover: 57800, adjustment_value: 3660 },
          { date: Time.zone.local(2017, 10, 18), opening_price: 3705, high_price: 3715, low_price: 3645, close_price: 3665, turnover: 26400, adjustment_value: 3665 },
          { date: Time.zone.local(2017, 10, 17), opening_price: 3650, high_price: 3715, low_price: 3605, close_price: 3695, turnover: 68800, adjustment_value: 3695 },
          { date: Time.zone.local(2017, 10, 16), opening_price: 3570, high_price: 3685, low_price: 3560, close_price: 3650, turnover: 63800, adjustment_value: 3650 },
          { date: Time.zone.local(2017, 10, 13), opening_price: 3585, high_price: 3595, low_price: 3555, close_price: 3570, turnover: 34800, adjustment_value: 3570 },
          { date: Time.zone.local(2017, 10, 12), opening_price: 3645, high_price: 3645, low_price: 3585, close_price: 3585, turnover: 33400, adjustment_value: 3585 },
          { date: Time.zone.local(2017, 10, 11), opening_price: 3565, high_price: 3665, low_price: 3530, close_price: 3645, turnover: 81700, adjustment_value: 3645 },
          { date: Time.zone.local(2017, 10, 10), opening_price: 3600, high_price: 3620, low_price: 3560, close_price: 3575, turnover: 46000, adjustment_value: 3575 },
          { date: Time.zone.local(2017, 10, 06), opening_price: 3585, high_price: 3615, low_price: 3510, close_price: 3605, turnover: 78100, adjustment_value: 3605 },
          { date: Time.zone.local(2017, 10, 05), opening_price: 3520, high_price: 3625, low_price: 3495, close_price: 3590, turnover: 107600, adjustment_value: 3590 },
          { date: Time.zone.local(2017, 10, 04), opening_price: 3490, high_price: 3510, low_price: 3430, close_price: 3510, turnover: 61600, adjustment_value: 3510 },
          { date: Time.zone.local(2017, 10, 03), opening_price: 3415, high_price: 3500, low_price: 3405, close_price: 3480, turnover: 83700, adjustment_value: 3480 },
          { date: Time.zone.local(2017, 10, 02), opening_price: 3370, high_price: 3415, low_price: 3335, close_price: 3400, turnover: 49000, adjustment_value: 3400 },
          { date: Time.zone.local(2017, 09, 29), opening_price: 3300, high_price: 3345, low_price: 3295, close_price: 3340, turnover: 36500, adjustment_value: 3340 },
          { date: Time.zone.local(2017, 09, 28), opening_price: 3300, high_price: 3300, low_price: 3250, close_price: 3265, turnover: 14200, adjustment_value: 3265 },
          { date: Time.zone.local(2017, 09, 27), opening_price: 3275, high_price: 3305, low_price: 3275, close_price: 3295, turnover: 9700, adjustment_value: 3295 },
          { date: Time.zone.local(2017, 09, 26), opening_price: 3250, high_price: 3275, low_price: 3240, close_price: 3275, turnover: 16500, adjustment_value: 3275 },
          { date: Time.zone.local(2017, 09, 25), opening_price: 3220, high_price: 3240, low_price: 3215, close_price: 3240, turnover: 14800, adjustment_value: 3240 },
          { date: Time.zone.local(2017, 09, 22), opening_price: 3260, high_price: 3280, low_price: 3215, close_price: 3220, turnover: 15400, adjustment_value: 3220 },
          { date: Time.zone.local(2017, 09, 21), opening_price: 3290, high_price: 3300, low_price: 3235, close_price: 3255, turnover: 34800, adjustment_value: 3255 },
          { date: Time.zone.local(2017, 09, 20), opening_price: 3340, high_price: 3340, low_price: 3285, close_price: 3295, turnover: 24700, adjustment_value: 3295 },
          { date: Time.zone.local(2017, 09, 19), opening_price: 3355, high_price: 3370, low_price: 3315, close_price: 3340, turnover: 29900, adjustment_value: 3340 },
          { date: Time.zone.local(2017, 09, 15), opening_price: 3200, high_price: 3340, low_price: 3200, close_price: 3335, turnover: 71700, adjustment_value: 3335 },
          { date: Time.zone.local(2017, 09, 14), opening_price: 3250, high_price: 3255, low_price: 3200, close_price: 3205, turnover: 26900, adjustment_value: 3205 },
          { date: Time.zone.local(2017, 09, 13), opening_price: 3225, high_price: 3245, low_price: 3220, close_price: 3235, turnover: 19500, adjustment_value: 3235 },
          { date: Time.zone.local(2017, 09, 12), opening_price: 3250, high_price: 3255, low_price: 3215, close_price: 3220, turnover: 21000, adjustment_value: 3220 },
          { date: Time.zone.local(2017, 09, 11), opening_price: 3245, high_price: 3280, low_price: 3230, close_price: 3240, turnover: 24800, adjustment_value: 3240 },
          { date: Time.zone.local(2017, 09, 08), opening_price: 3250, high_price: 3250, low_price: 3220, close_price: 3240, turnover: 18500, adjustment_value: 3240 },
          { date: Time.zone.local(2017, 09, 07), opening_price: 3265, high_price: 3280, low_price: 3250, close_price: 3255, turnover: 10800, adjustment_value: 3255 },
          { date: Time.zone.local(2017, 09, 06), opening_price: 3205, high_price: 3270, low_price: 3205, close_price: 3260, turnover: 19200, adjustment_value: 3260 },
          { date: Time.zone.local(2017, 09, 05), opening_price: 3300, high_price: 3300, low_price: 3240, close_price: 3240, turnover: 22300, adjustment_value: 3240 },
          { date: Time.zone.local(2017, 09, 04), opening_price: 3360, high_price: 3370, low_price: 3295, close_price: 3300, turnover: 25600, adjustment_value: 3300 },
          { date: Time.zone.local(2017, 09, 01), opening_price: 3355, high_price: 3375, low_price: 3325, close_price: 3360, turnover: 19100, adjustment_value: 3360 },
          { date: Time.zone.local(2017, 08, 31), opening_price: 3395, high_price: 3395, low_price: 3350, close_price: 3360, turnover: 29700, adjustment_value: 3360 },
          { date: Time.zone.local(2017, 08, 30), opening_price: 3400, high_price: 3400, low_price: 3360, close_price: 3385, turnover: 24700, adjustment_value: 3385 },
          { date: Time.zone.local(2017, 08, 29), opening_price: 3310, high_price: 3400, low_price: 3310, close_price: 3380, turnover: 47400, adjustment_value: 3380 },
          { date: Time.zone.local(2017, 08, 28), opening_price: 3265, high_price: 3310, low_price: 3265, close_price: 3310, turnover: 23400, adjustment_value: 3310 },
          { date: Time.zone.local(2017, 08, 25), opening_price: 3275, high_price: 3290, low_price: 3260, close_price: 3265, turnover: 19000, adjustment_value: 3265 },
          { date: Time.zone.local(2017, 08, 24), opening_price: 3280, high_price: 3285, low_price: 3255, close_price: 3280, turnover: 18400, adjustment_value: 3280 },
          { date: Time.zone.local(2017, 08, 23), opening_price: 3300, high_price: 3320, low_price: 3250, close_price: 3250, turnover: 37700, adjustment_value: 3250 },
          { date: Time.zone.local(2017, 08, 22), opening_price: 3295, high_price: 3320, low_price: 3285, close_price: 3290, turnover: 20800, adjustment_value: 3290 },
          { date: Time.zone.local(2017, 08, 21), opening_price: 3315, high_price: 3330, low_price: 3285, close_price: 3330, turnover: 31100, adjustment_value: 3330 },
          { date: Time.zone.local(2017, 08, 18), opening_price: 3300, high_price: 3335, low_price: 3290, close_price: 3330, turnover: 41000, adjustment_value: 3330 },
          { date: Time.zone.local(2017, 08, 17), opening_price: 3325, high_price: 3375, low_price: 3310, close_price: 3340, turnover: 58100, adjustment_value: 3340 },
          { date: Time.zone.local(2017, 08, 16), opening_price: 3280, high_price: 3370, low_price: 3275, close_price: 3350, turnover: 121900, adjustment_value: 3350 },
          { date: Time.zone.local(2017, 08, 15), opening_price: 3235, high_price: 3275, low_price: 3225, close_price: 3250, turnover: 37900, adjustment_value: 3250 },
          { date: Time.zone.local(2017, 08, 14), opening_price: 3220, high_price: 3230, low_price: 3180, close_price: 3210, turnover: 29100, adjustment_value: 3210 },
          { date: Time.zone.local(2017, 08, 10), opening_price: 3250, high_price: 3255, low_price: 3225, close_price: 3235, turnover: 23300, adjustment_value: 3235 },
          { date: Time.zone.local(2017, 08, 09), opening_price: 3265, high_price: 3265, low_price: 3210, close_price: 3235, turnover: 27000, adjustment_value: 3235 },
          { date: Time.zone.local(2017, 08, 08), opening_price: 3270, high_price: 3275, low_price: 3245, close_price: 3270, turnover: 36200, adjustment_value: 3270 },
          { date: Time.zone.local(2017, 08, 07), opening_price: 3250, high_price: 3280, low_price: 3170, close_price: 3270, turnover: 82800, adjustment_value: 3270 },
          { date: Time.zone.local(2017, 08, 04), opening_price: 3115, high_price: 3230, low_price: 3100, close_price: 3220, turnover: 106000, adjustment_value: 3220 },
          { date: Time.zone.local(2017, 08, 03), opening_price: 3095, high_price: 3115, low_price: 3090, close_price: 3115, turnover: 10900, adjustment_value: 3115 },
          { date: Time.zone.local(2017, 08, 02), opening_price: 3120, high_price: 3120, low_price: 3090, close_price: 3110, turnover: 12400, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 08, 01), opening_price: 3110, high_price: 3125, low_price: 3090, close_price: 3120, turnover: 17200, adjustment_value: 3120 },
          { date: Time.zone.local(2017, 07, 31), opening_price: 3115, high_price: 3120, low_price: 3100, close_price: 3105, turnover: 11100, adjustment_value: 3105 },
          { date: Time.zone.local(2017, 07, 28), opening_price: 3130, high_price: 3130, low_price: 3110, close_price: 3125, turnover: 7900, adjustment_value: 3125 },
          { date: Time.zone.local(2017, 07, 27), opening_price: 3085, high_price: 3145, low_price: 3085, close_price: 3130, turnover: 32000, adjustment_value: 3130 },
          { date: Time.zone.local(2017, 07, 26), opening_price: 3105, high_price: 3120, low_price: 3085, close_price: 3100, turnover: 13600, adjustment_value: 3100 },
          { date: Time.zone.local(2017, 07, 25), opening_price: 3110, high_price: 3125, low_price: 3095, close_price: 3110, turnover: 14500, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 07, 24), opening_price: 3130, high_price: 3130, low_price: 3105, close_price: 3125, turnover: 13900, adjustment_value: 3125 },
          { date: Time.zone.local(2017, 07, 21), opening_price: 3105, high_price: 3125, low_price: 3095, close_price: 3125, turnover: 17600, adjustment_value: 3125 },
          { date: Time.zone.local(2017, 07, 20), opening_price: 3090, high_price: 3105, low_price: 3070, close_price: 3105, turnover: 30800, adjustment_value: 3105 },
          { date: Time.zone.local(2017, 07, 19), opening_price: 3065, high_price: 3100, low_price: 3060, close_price: 3075, turnover: 22200, adjustment_value: 3075 },
          { date: Time.zone.local(2017, 07, 18), opening_price: 3060, high_price: 3080, low_price: 3050, close_price: 3060, turnover: 29600, adjustment_value: 3060 },
          { date: Time.zone.local(2017, 07, 14), opening_price: 3085, high_price: 3095, low_price: 3075, close_price: 3075, turnover: 12600, adjustment_value: 3075 },
          { date: Time.zone.local(2017, 07, 13), opening_price: 3105, high_price: 3110, low_price: 3090, close_price: 3090, turnover: 11600, adjustment_value: 3090 },
          { date: Time.zone.local(2017, 07, 12), opening_price: 3130, high_price: 3130, low_price: 3090, close_price: 3095, turnover: 17300, adjustment_value: 3095 },
          { date: Time.zone.local(2017, 07, 11), opening_price: 3120, high_price: 3140, low_price: 3100, close_price: 3140, turnover: 24700, adjustment_value: 3140 },
          { date: Time.zone.local(2017, 07, 10), opening_price: 3120, high_price: 3130, low_price: 3095, close_price: 3110, turnover: 19500, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 07, 07), opening_price: 3125, high_price: 3130, low_price: 3085, close_price: 3110, turnover: 38700, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 07, 06), opening_price: 3160, high_price: 3160, low_price: 3100, close_price: 3115, turnover: 40800, adjustment_value: 3115 },
          { date: Time.zone.local(2017, 07, 05), opening_price: 3110, high_price: 3135, low_price: 3105, close_price: 3130, turnover: 25400, adjustment_value: 3130 },
          { date: Time.zone.local(2017, 07, 04), opening_price: 3140, high_price: 3140, low_price: 3110, close_price: 3130, turnover: 39200, adjustment_value: 3130 },
          { date: Time.zone.local(2017, 07, 03), opening_price: 3105, high_price: 3125, low_price: 3095, close_price: 3125, turnover: 45300, adjustment_value: 3125 },
          { date: Time.zone.local(2017, 06, 30), opening_price: 3050, high_price: 3090, low_price: 3030, close_price: 3090, turnover: 33600, adjustment_value: 3090 },
          { date: Time.zone.local(2017, 06, 29), opening_price: 3080, high_price: 3080, low_price: 3050, close_price: 3060, turnover: 25100, adjustment_value: 3060 },
          { date: Time.zone.local(2017, 06, 28), opening_price: 3110, high_price: 3115, low_price: 3065, close_price: 3070, turnover: 17200, adjustment_value: 3070 },
          { date: Time.zone.local(2017, 06, 27), opening_price: 3080, high_price: 3115, low_price: 3050, close_price: 3110, turnover: 33100, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 06, 26), opening_price: 3105, high_price: 3120, low_price: 3085, close_price: 3085, turnover: 16900, adjustment_value: 3085 },
          { date: Time.zone.local(2017, 06, 23), opening_price: 3160, high_price: 3160, low_price: 3110, close_price: 3125, turnover: 32300, adjustment_value: 3125 },
          { date: Time.zone.local(2017, 06, 22), opening_price: 3220, high_price: 3225, low_price: 3180, close_price: 3185, turnover: 30000, adjustment_value: 3185 },
          { date: Time.zone.local(2017, 06, 21), opening_price: 3185, high_price: 3215, low_price: 3175, close_price: 3205, turnover: 68000, adjustment_value: 3205 },
          { date: Time.zone.local(2017, 06, 20), opening_price: 3175, high_price: 3190, low_price: 3160, close_price: 3185, turnover: 50700, adjustment_value: 3185 },
          { date: Time.zone.local(2017, 06, 19), opening_price: 3125, high_price: 3175, low_price: 3120, close_price: 3150, turnover: 40700, adjustment_value: 3150 },
          { date: Time.zone.local(2017, 06, 16), opening_price: 3130, high_price: 3140, low_price: 3110, close_price: 3130, turnover: 25800, adjustment_value: 3130 },
          { date: Time.zone.local(2017, 06, 15), opening_price: 3095, high_price: 3130, low_price: 3090, close_price: 3110, turnover: 31300, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 06, 14), opening_price: 3110, high_price: 3125, low_price: 3095, close_price: 3095, turnover: 20100, adjustment_value: 3095 },
          { date: Time.zone.local(2017, 06, 13), opening_price: 3095, high_price: 3130, low_price: 3090, close_price: 3110, turnover: 24700, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 06, 12), opening_price: 3070, high_price: 3115, low_price: 3040, close_price: 3110, turnover: 30000, adjustment_value: 3110 },
          { date: Time.zone.local(2017, 06, 09), opening_price: 3090, high_price: 3090, low_price: 3045, close_price: 3055, turnover: 36800, adjustment_value: 3055 },
          { date: Time.zone.local(2017, 06, 08), opening_price: 3065, high_price: 3115, low_price: 3055, close_price: 3090, turnover: 47700, adjustment_value: 3090 },
          { date: Time.zone.local(2017, 06, 07), opening_price: 3060, high_price: 3070, low_price: 3040, close_price: 3050, turnover: 21500, adjustment_value: 3050 },
          { date: Time.zone.local(2017, 06, 06), opening_price: 3080, high_price: 3080, low_price: 3050, close_price: 3060, turnover: 22800, adjustment_value: 3060 },
          { date: Time.zone.local(2017, 06, 05), opening_price: 3035, high_price: 3075, low_price: 3035, close_price: 3065, turnover: 17000, adjustment_value: 3065 },
          { date: Time.zone.local(2017, 06, 02), opening_price: 3080, high_price: 3080, low_price: 3040, close_price: 3060, turnover: 32200, adjustment_value: 3060 },
          { date: Time.zone.local(2017, 06, 01), opening_price: 3070, high_price: 3075, low_price: 3045, close_price: 3055, turnover: 14100, adjustment_value: 3055 },
          { date: Time.zone.local(2017, 05, 31), opening_price: 3010, high_price: 3070, low_price: 3010, close_price: 3055, turnover: 28900, adjustment_value: 3055 },
          { date: Time.zone.local(2017, 05, 30), opening_price: 3055, high_price: 3065, low_price: 3005, close_price: 3025, turnover: 23100, adjustment_value: 3025 },
          { date: Time.zone.local(2017, 05, 29), opening_price: 3075, high_price: 3085, low_price: 3060, close_price: 3065, turnover: 15700, adjustment_value: 3065 },
          { date: Time.zone.local(2017, 05, 26), opening_price: 3120, high_price: 3120, low_price: 3075, close_price: 3080, turnover: 20700, adjustment_value: 3080 },
          { date: Time.zone.local(2017, 05, 25), opening_price: 3175, high_price: 3175, low_price: 3115, close_price: 3130, turnover: 23600, adjustment_value: 3130 },
          { date: Time.zone.local(2017, 05, 24), opening_price: 3150, high_price: 3175, low_price: 3150, close_price: 3175, turnover: 47500, adjustment_value: 3175 },
          { date: Time.zone.local(2017, 05, 23), opening_price: 3145, high_price: 3155, low_price: 3135, close_price: 3140, turnover: 44800, adjustment_value: 3140 },
          { date: Time.zone.local(2017, 05, 22), opening_price: 3105, high_price: 3145, low_price: 3100, close_price: 3145, turnover: 52200, adjustment_value: 3145 },
          { date: Time.zone.local(2017, 05, 19), opening_price: 3080, high_price: 3100, low_price: 3060, close_price: 3100, turnover: 40000, adjustment_value: 3100 },
          { date: Time.zone.local(2017, 05, 18), opening_price: 3040, high_price: 3085, low_price: 3020, close_price: 3085, turnover: 56400, adjustment_value: 3085 },
          { date: Time.zone.local(2017, 05, 17), opening_price: 3040, high_price: 3075, low_price: 3030, close_price: 3075, turnover: 46100, adjustment_value: 3075 },
          { date: Time.zone.local(2017, 05, 16), opening_price: 3050, high_price: 3065, low_price: 3025, close_price: 3060, turnover: 43500, adjustment_value: 3060 },
          { date: Time.zone.local(2017, 05, 15), opening_price: 3010, high_price: 3040, low_price: 2960, close_price: 3040, turnover: 48800, adjustment_value: 3040 },
          { date: Time.zone.local(2017, 05, 12), opening_price: 3050, high_price: 3070, low_price: 2974, close_price: 3010, turnover: 54000, adjustment_value: 3010 },
          { date: Time.zone.local(2017, 05, 11), opening_price: 2995, high_price: 3040, low_price: 2972, close_price: 3040, turnover: 69900, adjustment_value: 3040 },
          { date: Time.zone.local(2017, 05, 10), opening_price: 2965, high_price: 2996, low_price: 2965, close_price: 2990, turnover: 45600, adjustment_value: 2990 },
          { date: Time.zone.local(2017, 05, 09), opening_price: 2985, high_price: 2987, low_price: 2964, close_price: 2969, turnover: 27100, adjustment_value: 2969 },
          { date: Time.zone.local(2017, 05, 08), opening_price: 2973, high_price: 2987, low_price: 2961, close_price: 2985, turnover: 35700, adjustment_value: 2985 },
          { date: Time.zone.local(2017, 05, 02), opening_price: 2941, high_price: 2950, low_price: 2931, close_price: 2945, turnover: 28500, adjustment_value: 2945 },
          { date: Time.zone.local(2017, 05, 01), opening_price: 2930, high_price: 2948, low_price: 2919, close_price: 2935, turnover: 23800, adjustment_value: 2935 },
          { date: Time.zone.local(2017, 04, 28), opening_price: 2939, high_price: 2953, low_price: 2922, close_price: 2935, turnover: 23400, adjustment_value: 2935 },
          { date: Time.zone.local(2017, 04, 27), opening_price: 2940, high_price: 2951, low_price: 2933, close_price: 2951, turnover: 18500, adjustment_value: 2951 },
          { date: Time.zone.local(2017, 04, 26), opening_price: 2918, high_price: 2943, low_price: 2916, close_price: 2935, turnover: 39300, adjustment_value: 2935 },
          { date: Time.zone.local(2017, 04, 25), opening_price: 2936, high_price: 2936, low_price: 2908, close_price: 2913, turnover: 21100, adjustment_value: 2913 },
          { date: Time.zone.local(2017, 04, 24), opening_price: 2900, high_price: 2920, low_price: 2875, close_price: 2919, turnover: 31600, adjustment_value: 2919 },
          { date: Time.zone.local(2017, 04, 21), opening_price: 2890, high_price: 2890, low_price: 2871, close_price: 2888, turnover: 17500, adjustment_value: 2888 },
          { date: Time.zone.local(2017, 04, 20), opening_price: 2900, high_price: 2919, low_price: 2866, close_price: 2871, turnover: 27000, adjustment_value: 2871 },
          { date: Time.zone.local(2017, 04, 19), opening_price: 2880, high_price: 2899, low_price: 2880, close_price: 2897, turnover: 32000, adjustment_value: 2897 },
          { date: Time.zone.local(2017, 04, 18), opening_price: 2890, high_price: 2890, low_price: 2859, close_price: 2880, turnover: 27200, adjustment_value: 2880 },
          { date: Time.zone.local(2017, 04, 17), opening_price: 2860, high_price: 2903, low_price: 2859, close_price: 2896, turnover: 23400, adjustment_value: 2896 },
          { date: Time.zone.local(2017, 04, 14), opening_price: 2880, high_price: 2888, low_price: 2853, close_price: 2860, turnover: 19400, adjustment_value: 2860 },
          { date: Time.zone.local(2017, 04, 13), opening_price: 2861, high_price: 2898, low_price: 2860, close_price: 2883, turnover: 42400, adjustment_value: 2883 },
          { date: Time.zone.local(2017, 04, 12), opening_price: 2905, high_price: 2908, low_price: 2873, close_price: 2895, turnover: 29900, adjustment_value: 2895 },
          { date: Time.zone.local(2017, 04, 11), opening_price: 2906, high_price: 2928, low_price: 2905, close_price: 2911, turnover: 21800, adjustment_value: 2911 },
          { date: Time.zone.local(2017, 04, 10), opening_price: 2931, high_price: 2947, low_price: 2915, close_price: 2926, turnover: 26500, adjustment_value: 2926 },
          { date: Time.zone.local(2017, 04, 07), opening_price: 2960, high_price: 2980, low_price: 2942, close_price: 2944, turnover: 31500, adjustment_value: 2944 },
          { date: Time.zone.local(2017, 04, 06), opening_price: 2980, high_price: 2994, low_price: 2941, close_price: 2942, turnover: 34600, adjustment_value: 2942 },
          { date: Time.zone.local(2017, 04, 05), opening_price: 3015, high_price: 3030, low_price: 2994, close_price: 3005, turnover: 35800, adjustment_value: 3005 },
          { date: Time.zone.local(2017, 04, 04), opening_price: 3005, high_price: 3020, low_price: 2983, close_price: 3010, turnover: 77200, adjustment_value: 3010 },
          { date: Time.zone.local(2017, 04, 03), opening_price: 2946, high_price: 3025, low_price: 2942, close_price: 3010, turnover: 80800, adjustment_value: 3010 },
          { date: Time.zone.local(2017, 03, 31), opening_price: 2948, high_price: 2996, low_price: 2936, close_price: 2936, turnover: 62300, adjustment_value: 2936 },
          { date: Time.zone.local(2017, 03, 30), opening_price: 3005, high_price: 3010, low_price: 2936, close_price: 2942, turnover: 104000, adjustment_value: 2942 },
          { date: Time.zone.local(2017, 03, 29), opening_price: 3050, high_price: 3065, low_price: 2999, close_price: 3010, turnover: 166400, adjustment_value: 3010 },
          { date: Time.zone.local(2017, 03, 28), opening_price: 3120, high_price: 3150, low_price: 3110, close_price: 3115, turnover: 188500, adjustment_value: 3115 },
          { date: Time.zone.local(2017, 03, 27), opening_price: 3125, high_price: 3135, low_price: 3110, close_price: 3120, turnover: 89300, adjustment_value: 3120 },
          { date: Time.zone.local(2017, 03, 24), opening_price: 3115, high_price: 3140, low_price: 3115, close_price: 3125, turnover: 62700, adjustment_value: 3125 },
          { date: Time.zone.local(2017, 03, 23), opening_price: 3130, high_price: 3150, low_price: 3110, close_price: 3115, turnover: 78900, adjustment_value: 3115 },
          { date: Time.zone.local(2017, 03, 22), opening_price: 3155, high_price: 3175, low_price: 3145, close_price: 3150, turnover: 72800, adjustment_value: 3150 },
          { date: Time.zone.local(2017, 03, 21), opening_price: 3180, high_price: 3205, low_price: 3175, close_price: 3185, turnover: 74200, adjustment_value: 3185 },
          { date: Time.zone.local(2017, 03, 17), opening_price: 3170, high_price: 3195, low_price: 3165, close_price: 3195, turnover: 61400, adjustment_value: 3195 },
          { date: Time.zone.local(2017, 03, 16), opening_price: 3130, high_price: 3170, low_price: 3110, close_price: 3160, turnover: 55200, adjustment_value: 3160 },
          { date: Time.zone.local(2017, 03, 15), opening_price: 3210, high_price: 3210, low_price: 3135, close_price: 3140, turnover: 97200, adjustment_value: 3140 },
          { date: Time.zone.local(2017, 03, 14), opening_price: 3180, high_price: 3200, low_price: 3160, close_price: 3200, turnover: 75700, adjustment_value: 3200 }
        ]
      },
      related_requests: [
        { url: "https://kabuoji3.com/stock/1301/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2018/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2017/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2016/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2015/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2014/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2013/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2012/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2011/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2010/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2009/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2008/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2007/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2006/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2005/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2004/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2003/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2002/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2001/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/2000/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1999/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1998/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1997/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1996/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1995/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1994/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1993/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1992/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1991/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1990/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1989/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1988/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1987/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1986/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1985/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1984/", method: "GET" },
        { url: "https://kabuoji3.com/stock/1301/1983/", method: "GET" }
      ]
    }

    # execute
    stock_detail_page_rule = StockDetailPageTestRule.new
    result = stock_detail_page_rule.parse(downloaded_content)

    # check
    assert_equal expected_result, result
  end

  test "parse: stock detail page: 「(株)極洋」の2017年" do
    downloaded_content = {
      url: "https://kabuoji3.com/stock/1301/2017/",
      method: "GET",
      response_headers: {
        "server": "nginx",
        "date": "Wed, 03 Oct 2018 04:08:05 GMT",
        "content-type": "text/html",
        "x-powered-by": "PHP/5.2.17"
      },
      content: File.open("test/fixtures/files/stock_detail_1301_2017.html").read,
      downloaded_timestamp: Time.zone.local(2018, 10, 3, 11, 8, 5)
    }

    # execute
    stock_detail_page_rule = StockDetailPageTestRule.new
    result = stock_detail_page_rule.parse(downloaded_content)

    # check
    assert_equal 2017, result[:data][:year]
  end

end
